import{j as e,r as o,u as j,a as S,h as y,F as k,f as C}from"./index-BFiYGGbe.js";import _ from"./Modal-C1K8Ow_M.js";import{I as f,L as v,a as R}from"./RightArrow-JzgHmBVb.js";function B({action:t,defaultChecked:s,index:c,onChange:a}){return e.jsxs("div",{className:"action-selector__item",children:[e.jsx("input",{type:"radio",name:"action",id:`action-${c}`,value:c,onChange:a,defaultChecked:s}),e.jsxs("label",{className:"action-selector__label",htmlFor:`action-${c}`,children:[e.jsx("span",{className:`action-selector__icon type-of-day--${c}`}),e.jsx("span",{children:t})]})]},c)}function P({value:t,onChange:s}){const c=o.useCallback(()=>{t>0&&s(t-1)},[s,t]),a=o.useCallback(()=>{t<7&&s(t+1)},[s,t]);return{handlePrevClick:c,handleNextClick:a,disabledPrevButton:t===0,disabledNextButton:t===6}}function A({onChange:t,value:s}){const c=j(),{handlePrevClick:a,handleNextClick:n,disabledPrevButton:l,disabledNextButton:i}=P({value:s,onChange:t});return e.jsxs("div",{className:"recurrence-selector",children:[e.jsx("p",{children:c.recurrenceSelector.title}),e.jsxs("div",{children:[e.jsx(f,{icon:e.jsx(v,{}),onClick:a,disabled:l}),e.jsx("span",{className:"recurrence-selector__value",children:s||c.recurrenceSelector.doNotRepeat}),e.jsx(f,{icon:e.jsx(R,{}),onClick:n,disabled:i})]}),e.jsx("input",{name:"recurrence",type:"hidden",value:s})]})}function w({onAccept:t,onClose:s,open:c,selectedDayData:a}){const n=j(),[l,i]=o.useState(!1),[b,p]=o.useState(0),d=a?.date??"",u=a?.record??void 0,m=o.useCallback(()=>i(!0),[]),h=o.useCallback(r=>{r.preventDefault(),p(0),i(!1);const N=new FormData(r.currentTarget),x=S.prepareUserRecordForSave(d,N);x&&t(x)},[d,t]);return e.jsx(_,{open:c,title:n.modal.actionSelector.title(d?C(new Date(d),"dd.MM.yyyy"):""),onClose:s,disableAcceptButton:!l,onSubmit:h,children:e.jsxs("div",{className:"action-selector",children:[e.jsx("div",{className:"action-selector__container",children:y.map(r=>e.jsx(B,{action:r.label,index:r.id,defaultChecked:u?u.type===r.id:void 0,onChange:m},`action-${r.id}`))}),e.jsx(k,{className:"action-selector__input",name:"comment",labelProps:{label:n.modal.actionSelector.field.comment.label},inputProps:{onChange:m,type:"text",defaultValue:u?.comment}}),e.jsx(A,{onChange:r=>{m(),p(r)},value:b})]})})}export{w as default};
