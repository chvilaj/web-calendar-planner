import{r as d,a as m,u,j as l,E as g,F as x}from"./index-gp607KRL.js";import j from"./Modal-B_tCGJ_5.js";function h(){const i=u(),[p,s]=d.useState(),[a,t]=d.useState();return{data:p,error:a,run:r=>{const n=new FileReader;n.onload=f=>{try{const e=f.target?.result,o=JSON.parse(e);m.isImportedDataValid(o)?(s(o),t(void 0)):(s(void 0),t(i.error.import.dataIsNotValid),n.abort())}catch(e){let o;typeof e=="string"?o=e:e instanceof Error?o=e.message:o=i.error.import.unknown,s(void 0),t(o)}},n.onerror=()=>{s(void 0),t(i.error.import.read)},n.readAsText(r)}}}function y({open:i,onClose:p,onAccept:s}){const a=u(),t=d.useRef(null),{data:c,error:r,run:n}=h(),f=async e=>{e.target.files&&e.target.files.length>0&&n(e.target.files[0])};return d.useEffect(()=>{r&&t.current&&(t.current.value="")},[r]),l.jsxs(j,{disableAcceptButton:!c||!!r,onAccept:()=>c&&s?.(c),onClose:p,open:i,title:a.modal.import.title,children:[r&&l.jsx(g,{children:r}),l.jsxs("p",{children:[l.jsx("strong",{children:a.shared.warning}),a.modal.import.content]}),l.jsx(x,{ref:t,name:"imported-file",labelProps:{label:a.modal.import.field.file.label},inputProps:{accept:".json,application/json",onChange:f,type:"file"}})]})}export{y as default};
