const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ActionSelectorModal-B3ottG88.js","./index-BGHBJPkP.js","./index-CPxSV3yv.css","./Modal-BB9BpR_U.js"])))=>i.map(i=>d[i]);
import{t as y,j as t,r as s,S as w,D as b,e as _,f as g,c as u,_ as L}from"./index-BGHBJPkP.js";function T(e,n){return y(e,n?.in).getMonth()}function M(e,n){return y(e,n?.in).getFullYear()}function C({children:e,className:n,id:a,variant:o="body"}){const r=o==="head"?"th":"td";return t.jsx(r,{className:n,id:a,children:e})}function N(){const e=s.useRef(null),n=s.useRef(null),a=s.useCallback(r=>{r&&(e.current=window.setTimeout(()=>{n.current?.setAttribute("data-tooltip",r)},750))},[]),o=s.useCallback(()=>{e.current&&(clearTimeout(e.current),e.current=null),n.current?.removeAttribute("data-tooltip")},[]);return{elementRef:n,showTooltip:a,hideTooltip:o}}function A({children:e,className:n,id:a,onClick:o,tooltip:r}){const{elementRef:c,showTooltip:m,hideTooltip:h}=N();return t.jsx("td",{ref:c,className:n,id:a,onClick:o,onMouseEnter:()=>r&&m(r),onMouseLeave:h,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&o()},role:"button",tabIndex:0,children:e})}function D({children:e}){return t.jsx("tr",{children:e})}function v(){return t.jsx("thead",{children:t.jsx(D,{children:w.map((e,n)=>t.jsx(C,{variant:"head",className:"calendar__head-cell",children:e},`head-day-${n}`))})})}const R=s.lazy(()=>L(()=>import("./ActionSelectorModal-B3ottG88.js"),__vite__mapDeps([0,1,2,3]),import.meta.url));function W({currentDate:e}){const[n,a]=s.useState(null),{setUserRecords:o,userRecords:r}=s.useContext(b),c=s.useCallback(()=>a(null),[]),m=s.useCallback(l=>{c(),o(l,!0)},[c,o]),h=s.useCallback((l,x)=>{a({date:l,record:x??{type:0}})},[]);return t.jsxs(t.Fragment,{children:[t.jsxs("table",{className:"calendar",children:[t.jsx("caption",{children:_.getCaption(e)}),t.jsx(v,{}),t.jsx("tbody",{children:_.chunkMonthArray(e).map((l,x)=>t.jsx("tr",{children:l.map((p,f)=>{if(!p)return t.jsx(C,{className:"calendar__cell"},f);const i=g(new Date(M(e),T(e),p),"yyyy-MM-dd"),k=r?.[i],d=k?.type,j=k?.comment||void 0;return t.jsx(A,{id:i,className:u("calendar__cell calendar__cell--clickable",{[`type-of-day--${d}`]:typeof d=="number","calendar__cell--saturday":f===5&&!d,"calendar__cell--sunday":f===6&&!d,"calendar__cell--comment":j}),onClick:()=>h(i,k),tooltip:j,children:p},i)})},`week-${x}`))})]}),t.jsx(s.Suspense,{fallback:null,children:n&&t.jsx(R,{open:!0,onAccept:m,onClose:c,selectedDayData:n})})]})}function E(e,n=250){const[a,o]=s.useState(e),r=e!==a;return s.useEffect(()=>{if(e===a)return;const c=setTimeout(()=>{o(e)},n);return()=>clearTimeout(c)},[e,a,n]),{displayText:a,animating:r,newText:e}}function H({text:e}){const{displayText:n,animating:a,newText:o}=E(e);return t.jsxs("div",{className:"animated-text",children:[t.jsx("h2",{className:u("animated-text__content animated-text--old",a&&"animated-text--exit-up"),children:n}),t.jsx("h2",{className:u("animated-text__content animated-text--new",a&&"animated-text--enter-up"),children:o})]})}function I({onClick:e,icon:n,className:a,...o}){return t.jsx("button",{onClick:e,type:"button",className:u("icon-button",a),...o,children:s.isValidElement(n)&&n})}function $(){return t.jsxs("svg",{width:"48px",height:"48px",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"icon",children:[t.jsx("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:"#eae9e7",stroke:"#333",strokeWidth:"4",strokeLinejoin:"round",className:"icon--background"}),t.jsx("path",{d:"M32.4917 24.5H14.4917",stroke:"#333",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",className:"icon--color"}),t.jsx("path",{d:"M23.4917 15.5L14.4917 24.5L23.4917 33.5",stroke:"#333",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",className:"icon--color"})]})}function B(){return t.jsxs("svg",{width:"48px",height:"48px",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"icon",children:[t.jsx("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:"#eae9e7",stroke:"#333",strokeWidth:"4",strokeLinejoin:"round",className:"icon--background"}),t.jsx("path",{d:"M14.4917 24.5H32.4917",stroke:"#333",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",className:"icon--color"}),t.jsx("path",{d:"M23.4917 15.5L32.4917 24.5L23.4917 33.5",stroke:"#333",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",className:"icon--color"})]})}export{H as A,I,$ as L,W as M,B as a};
