import{j as e,r as o,u as b,a as S,A as y,F as k,f as C}from"./index-gp607KRL.js";import _ from"./Modal-B_tCGJ_5.js";import{I as j,L as v,a as R}from"./RightArrow-DpHTWsQK.js";function B({action:t,defaultChecked:s,index:c,onChange:r}){return e.jsxs("div",{className:"action-selector__item",children:[e.jsx("input",{type:"radio",name:"action",id:`action-${c}`,value:c,onChange:r,defaultChecked:s}),e.jsxs("label",{className:"action-selector__label",htmlFor:`action-${c}`,children:[e.jsx("span",{className:`action-selector__icon type-of-day--${c}`}),e.jsx("span",{children:t})]})]},c)}function A({value:t,onChange:s}){const c=o.useCallback(()=>{t>0&&s(t-1)},[s,t]),r=o.useCallback(()=>{t<7&&s(t+1)},[s,t]);return{handlePrevClick:c,handleNextClick:r,disabledPrevButton:t===0,disabledNextButton:t===6}}function P({onChange:t,value:s}){const c=b(),{handlePrevClick:r,handleNextClick:n,disabledPrevButton:i,disabledNextButton:d}=A({value:s,onChange:t});return e.jsxs("div",{className:"recurrence-selector",children:[e.jsx("p",{children:c.recurrenceSelector.title}),e.jsxs("div",{children:[e.jsx(j,{icon:e.jsx(v,{}),onClick:r,disabled:i}),e.jsx("span",{className:"recurrence-selector__value",children:s||c.recurrenceSelector.doNotRepeat}),e.jsx(j,{icon:e.jsx(R,{}),onClick:n,disabled:d})]}),e.jsx("input",{name:"recurrence",type:"hidden",value:s})]})}function I({onAccept:t,onClose:s,open:c,selectedDayData:r}){const n=b(),[i,d]=o.useState(!1),[h,x]=o.useState(0),u=r?.date??"",m=r?.record??void 0,p=o.useCallback(()=>d(!0),[]),N=o.useCallback(a=>{a.preventDefault(),x(0),d(!1);const l=new FormData(a.currentTarget),f=S.prepareUserRecordForSave(u,l);f&&t(f)},[u,t]);return e.jsx(_,{open:c,title:n.modal.actionSelector.title(u?C(new Date(u),"dd.MM.yyyy"):""),onClose:s,disableAcceptButton:!i,onSubmit:N,children:e.jsxs("div",{className:"action-selector",children:[e.jsx("div",{className:"action-selector__container",children:y.map((a,l)=>e.jsx(B,{action:a,index:l,defaultChecked:m?m.type===l:void 0,onChange:p},l))}),e.jsx(k,{className:"action-selector__input",name:"comment",labelProps:{label:n.modal.actionSelector.field.comment.label},inputProps:{onChange:p,type:"text",defaultValue:m?.comment}}),e.jsx(P,{onChange:a=>{p(),x(a)},value:h})]})})}export{I as default};
