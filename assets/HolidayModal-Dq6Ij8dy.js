import{t as m,r as o,D as x,g as y,j as s,E as g,u as E}from"./index-gp607KRL.js";import j from"./Modal-B_tCGJ_5.js";function D(t,r){const e=m(t,r?.in).getFullYear();return e%400===0||e%4===0&&e%100!==0}function N(t,r){const n=m(t,r?.in);return Number.isNaN(+n)?NaN:D(n)?366:365}function b(){const{setUserRecords:t,year:r}=o.useContext(x),n=o.useMemo(()=>({url:`https://svatkyapi.cz/api/day/${r}-01-01/interval/${N(new Date(r,0,1))}`,method:"GET"}),[r]),{response:e,loading:c,error:i,run:a}=y(n),d=o.useEffectEvent(l=>{if(!l)return;const h=l.filter(u=>u.isHoliday).reduce((u,f)=>(f.date&&(u[f.date]={type:2,comment:f.holidayName||""}),u),{});t(h,!0)});return o.useEffect(()=>{d(e)},[e]),{response:e,loading:c,error:i,run:a}}function M({onClose:t,open:r,title:n}){const e=E(),{loading:c,response:i,error:a,run:d}=b();o.useEffect(()=>{i&&!a&&t&&t()},[a,t,i]);const l=o.useCallback(async p=>{p.preventDefault(),await d()},[d]);return s.jsx(j,{open:r,disableAcceptButton:!!a,loading:c,onClose:t,onSubmit:l,title:n,children:a?s.jsx(g,{children:e.error.holidayModal.server}):s.jsxs(s.Fragment,{children:[s.jsx("p",{children:e.modal.addHolidays.content.line1}),s.jsxs("p",{children:[s.jsx("strong",{children:e.shared.warning}),e.modal.addHolidays.content.line1]})]})})}export{M as default};
